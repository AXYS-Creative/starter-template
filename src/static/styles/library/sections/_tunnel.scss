.tunnel {
  --section-height: 105vh;
  --img-size-start: 420px;

  @include row-center;
  height: var(--section-height);

  @include mq-max(md) {
    --img-size-start: 180px;
    // --img-size-start: calc(100% - var(--body-padding-double));
  }

  &:has(.tunnel__message) {
    position: relative;
  }

  &-clip {
    // max-width: $content-width;
    // margin-inline: var(--body-padding);
    width: var(--img-size-start);
    overflow: hidden;
    // border-radius: var(--radius) var(--radius) 0 0;
  }

  &__img {
    height: var(--section-height);
    object-fit: cover;
    filter: brightness(1); // "from" position â€” see animations.js
    scale: 1.125; // hide cropping when rotated
  }

  &__message-wrapper {
    @include width-clamp;
    @include section-padding;
    position: absolute;
    bottom: 0;
    left: 50%;
    translate: -50% 0;
    text-align: center;
    text-wrap: balance;
  }

  &__message {
    @include h2;
    @include text-fill;
    color: $white; // May not need theme swap
    text-transform: uppercase;
    font-weight: 900;
    filter: drop-shadow(0 0 0 rgba(0, 0, 0, 1));

    @include mq-max(md) {
      @include h6;
      text-transform: uppercase;
      font-weight: 900;
    }
  }

  &--extended {
    --section-height: 125vh;

    @include mq-max(md) {
      --section-height: 110vh;
    }
  }

  // below 'extneded' for specificity
  &--centered {
    --section-height: 200vh;
    --scale-difference: 0.5;
    @include column-center(flex-start);

    &-pin {
      position: relative;
    }

    .tunnel-clip {
      // border: $test;
      position: absolute;
      top: 50%;
      left: 50%;
      translate: -50% 0;
      height: 100vh;
      width: 100vw;
      transform-origin: center;
      scale: calc(1 - var(--scale-difference));
      border-radius: var(--radius--lg);
    }

    .tunnel__img {
      @include absolute-center;
      transform-origin: center;
      height: 100vh;
      width: 100vw;
      scale: calc(1 / (1 - var(--scale-difference)));
    }

    .tunnel__message {
      display: none;
    }
  }
}
