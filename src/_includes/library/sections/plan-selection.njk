<!-- prettier-ignore -->
{% set title = plan_selection.title | default('No title') %}
{% set desc = plan_selection.desc | default('No description "desc" added currently.') %}
{% set price_toggle = plan_selection.price_toggle or false %}

<!-- prettier-ignore -->
{% set plans = plan_selection.plans %}

<section class="plan-selection">
  <h2 class="plan-selection__title">{{ title }}</h2>
  <p class="plan-selection__desc">{{ desc }}</p>

  {% if price_toggle %}
  <div class="plan-selection__toggle-wrapper">
    <div class="plan-selection__toggle toggle-slider toggle-slider--solid">
      <button
        class="plan-selection__toggle-option"
        data-toggle-option="start"
        aria-selected="true"
      >
        Monthly
      </button>
      <button class="plan-selection__toggle-option" data-toggle-option="end">
        Quarterly
      </button>
      <div class="plan-selection__toggle-slider"></div>
    </div>
    <!-- prettier-ignore -->
    {% set tooltip = ({
      message: 'Save 20% with quarterly billing!',
      size: 'xs',
      place: 'right',
      place_sm: 'bottom',
      include_point: true
    }) %}
    {% include "../components/tooltip.njk" %}
  </div>
  {% endif %}

  <div class="plan-options">
    <!-- prettier-ignore -->
    {% for plan in plans %}  
    {% set swap_theme = '' %}
    {% if plan.swap_theme %}
      {% set swap_theme = 'plan-option--swap-theme' %}
    {% endif %}
    <div class="plan-option {{ swap_theme }}">
      <h3 class="plan-option__title h2">{{ plan.title }}</h3>

      <div class="plan-option__price-group">
        <div class="plan-option__line-group" aria-hidden="true">
          <div class="plan-option__line"></div>
          <div class="plan-option__price">
            <span class="plan-option__price-currency">$</span>
            <span
              class="plan-option__price-cost glitch-text"
              data-toggle-target
              data-toggle-end="{{ plan.price_qt }}"
              aria-live="polite"
            >
              {{ plan.price_mo }}
            </span>
            <span class="plan-option__price-frequency">/month</span>
          </div>
          <div class="plan-option__line"></div>
        </div>

        <p class="plan-option__total glitch-text" data-toggle-show="end">
          <span>$</span>
          <span
            class="plan-option__total-swap"
            data-toggle-target
            data-toggle-end="{{ plan.grand_total }}"
            aria-live="polite"
            >{{ plan.price_mo }}</span
          >
          <span class="glitch-text">billed</span>
          <span
            class="plan-option__total-frequency glitch-text"
            data-toggle-target
            data-toggle-end="quarterly"
          >
            monthly
          </span>
        </p>
      </div>

      <ul class="plan-option__perks">
        {% for perk in plan.features %}
        <li>{{ perk }}</li>
        {% endfor %}
      </ul>

      <p
        class="plan-option__message glitch-text"
        data-toggle-target
        data-toggle-end="Youâ€™re saving {{ plan.savings_qt }} quarterly!"
        aria-live="polite"
      >
        Save 20% with quarterly billing!
      </p>

      <!-- prettier-ignore -->
      {% set btn = ({
        text: plan.cta_1.text,
        type: 'solid'
      }) %}
      {% include "../../components/btn.njk" %}
    </div>
    {% endfor %}
  </div>
</section>
